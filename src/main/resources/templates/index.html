<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultrap.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<div layout:fragment="content">
  <div class="container-md">
    <!--    카카오맵 API 로딩 (HTTPS 사용)-->
    <script type="text/javascript"
            th:src="@{'https://dapi.kakao.com/v2/maps/sdk.js?appkey=0fef19877ef5e7f71e4ae9f828a6265b&libraries=services'}"></script>
    <!-- KakaoMap_API_KEY는 JS에서 불러와서 사용하기 까다로움(구글링, gpt를 통해서 방법을 찾아서 사용해도 에러 발생)
    그렇기에 사용하다가 나중에 API_KEY 재발급 받기!!!!!!! -->

<!--      <button onclick="getLocation()">주변 인기 장소 찾기</button>-->
      <p id="status">위치를 찾지 못했습니다</p>
  <!--    <h1>Geolocation API로 현재 위치 가져오기</h1>-->
      <div id="map" style="width:500px;height:400px;"></div>
      <ul id="places"></ul>

      <hr>

<!--    <form th:action="@{/}" method="post">-->
<!--      <input name="address" placeholder="도로명 주소를 입력해주세요."/>-->

<!--      <button type="submit">입력</button>-->
<!--    </form>-->

    <form id="addressForm" th:action="@{/}" method="get" style="display: none;">
      <input id="addressInput" name="address" type="text" />
    </form>

    <script th:src="@{/js/currentLocationMap.js}"></script>
<!--    <form id="addressForm" th:action="@{/}" method="post" style="display: none;">-->
<!--      <input id="addressInput" name="address" type="text" />-->
<!--    </form>-->

    <div th:unless="${weather == null}">
      <li th:text="'아이콘 : ' + ${weather['weather_icon']}"></li>
      <img th:src="'https://openweathermap.org/img/wn/' + ${weather['weather_icon']} + '@2x.png'" alt="Weather Icon" />
      <li th:text="'날씨 : ' + ${weather['weather_main']}"></li>
      <li th:text="'날씨 설명 : ' + ${weather['weather_description']}"></li>
      <li th:text="'온도 : ' + ${weather['temperature']} + '℃'"></li>
      <li th:text="'습도 : ' + ${weather['humidity']} + '%'"></li>
    </div>
    <div th:if="${weather == null}">
      <p>날씨 정보를 불러올 수 없습니다.</p>
    </div>

    <!-- 로그인 후 이메일, 도로명 주소를 확인-->
    <!--<div>
      <div th:if="${#authentication.principal != null}">
        <p>Email: <span th:text="${#authentication.principal}"></span></p>
        <p>Street Address: <span th:text="${location.streetAddress}"></span></p>
      </div>

      <div th:unless="${#authentication.principal != null}">
        <p>로그인이 안 되어있습니다.</p>
      </div>
    </div>-->

  </div>

  <h3><a th:href="@{/chat/chatting}">chatting test</a></h3>
  <button type="button" id="openChatBtn">대화방 열기</button>

<!-- 대화방 사이드바 -->
<div id="chatSidebar" class="chat-sidebar">
  <div class="chat-header">
    <span>대화방</span>
    <button id="closeChatBtn">&times;</button>
  </div>
  <div class="chat-messages">
    <div class="message">
      안녕하세요!<br>대화방에 오신 것을 환영합니다.
    </div>
  </div>
  <input type="text" id="chatInput" placeholder="메시지를 입력하세요...">
  <button id="sendBtn">전송</button>

</div>
  <script th:src="@{/js/chatside.js}"></script>
</div>